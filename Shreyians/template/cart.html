{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Cart</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ================= GLOBAL ================= */
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family: Inter, system-ui, sans-serif;
}

:root{
    --bg:#0c0c0c;
    --card:#111;
    --border:#1f1f1f;
    --text:#e5e7eb;
    --muted:#9ca3af;
    --accent:#24cfa6;
}

body{
    background:var(--bg);
    color:var(--text);
}

/* ================= NAVBAR ================= */
.navbar{
    height:80px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 6rem;
    border-bottom:1px solid var(--border);
}

.logo span{
    color:var(--accent);
    font-size:22px;
    font-weight:600;
}

.nav-links{
    list-style:none;
    display:flex;
    gap:40px;
}

.nav-links a{
    color:var(--text);
    text-decoration:none;
    font-size:15px;
}

.nav-links a:hover{
    color:var(--accent);
}

.auth-buttons{
    display:flex;
    align-items:center;
    gap:14px;
}

.auth-buttons a{
    text-decoration:none;
    padding:10px 22px;
    border-radius:999px;
    font-size:14px;
    font-weight:600;
}

.login{
    color:var(--accent);
    border:1px solid var(--accent);
}

.signup{
    background:var(--accent);
    color:#000;
}

/* ================= CART ================= */
.container{
    max-width:900px;
    margin:5rem auto;
}

.container h2{
    font-size:2.4rem;
    font-weight:400;
    margin-bottom:2.5rem;
}

/* ================= CART ITEM ================= */
.item{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:18px 0;
    border-bottom:1px solid var(--border);
}

.item img{
    width:90px;
    height:65px;
    object-fit:cover;
    border-radius:10px;
}

.course-info{
    flex:2;
    margin-left:16px;
}

.course-info strong{
    font-size:16px;
    font-weight:500;
}

.course-info span{
    display:block;
    font-size:14px;
    color:var(--muted);
    margin-top:4px;
}

/* ================= QUANTITY ================= */
.quantity-controls{
    display:flex;
    align-items:center;
    gap:10px;
}

.quantity-controls a{
    width:34px;
    height:34px;
    border:1px solid var(--border);
    border-radius:8px;
    display:flex;
    align-items:center;
    justify-content:center;
    color:var(--text);
    text-decoration:none;
    font-weight:600;
}

.quantity-controls a:hover{
    border-color:var(--accent);
    color:var(--accent);
}

/* ================= PRICE ================= */
.subtotal{
    text-align:right;
    font-weight:600;
    color:var(--accent);
}

.remove{
    display:block;
    margin-top:6px;
    font-size:13px;
    color:#ef4444;
    text-decoration:none;
}

/* ================= TOTAL ================= */
.total{
    display:flex;
    justify-content:space-between;
    margin-top:2rem;
    padding-top:1.5rem;
    border-top:1px solid var(--border);
    font-size:16px;
    font-weight:500;
}

/* ================= BUTTON ================= */
.checkout-btn{
    display:block;
    margin:2.5rem auto 0;
    padding:14px 40px;
    background:var(--accent);
    color:#000;
    text-decoration:none;
    border-radius:999px;
    font-weight:600;
    text-align:center;
    width:max-content;
}

/* ================= EMPTY CART ================= */
.empty-cart{
    text-align:center;
    padding:4rem 0;
}

.empty-cart h3{
    font-weight:400;
    margin-bottom:1.5rem;
}

.btn-add-course{
    padding:14px 36px;
    background:var(--accent);
    color:#000;
    text-decoration:none;
    border-radius:999px;
    font-weight:600;
}

/* ================= FOOTER=================  */
footer{
    border-top:1px solid var(--border);
    padding:4rem 6rem 2rem;
}
.footer-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
    gap:3rem;
}
footer h3{color:var(--accent);margin-bottom:14px;}
footer a,footer p{
    display:block;
    color:var(--muted);
    font-size:14px;
    margin-bottom:10px;
    text-decoration:none;
}

/* ================= RESPONSIVE ================= */
@media(max-width:768px){
    .navbar{
        padding:0 1.5rem;
    }
    .item{
        flex-direction:column;
        align-items:flex-start;
        gap:12px;
    }
}
</style>
</head>

<body>

<!-- ================= NAV ================= -->
<nav class="navbar">
    <div class="logo">
        <span>Sheryians</span>
    </div>

    <ul class="nav-links">
        <li><a href="{% url 'home' %}">Home</a></li>
        <li><a href="{% url 'course_list' %}">Courses</a></li>
        <li><a href="{% url 'cart_page' %}">Cart</a></li>
    </ul>

    <div class="auth-buttons">
        {% if request.user.is_authenticated %}
            <span style="font-size:14px;">Hello, {{ request.user.username }}</span>
            <a href="{% url 'signout' %}" class="login">Logout</a>
        {% else %}
            <a href="{% url 'signin' %}" class="login">Login</a>
            <a href="{% url 'signup' %}" class="signup">Sign Up</a>
        {% endif %}
    </div>
</nav>

<!-- ================= CART ================= -->
<div class="container">
    <h2>My Cart</h2>

    {% if cart_items %}
        {% for item in cart_items %}
        <div class="item">
            <img src="{{ item.course.image.url }}">

            <div class="course-info">
                <strong>{{ item.course.title }}</strong>
                <span>₹{{ item.price }} × {{ item.quantity }}</span>
            </div>

            <div class="quantity-controls">
                <a href="{% url 'update_cart' item.course.id 'dec' %}">−</a>
                {{ item.quantity }}
                <a href="{% url 'update_cart' item.course.id 'inc' %}">+</a>
            </div>

            <div class="subtotal">
                ₹{{ item.subtotal }}
                <a href="{% url 'update_cart' item.course.id 'remove' %}" class="remove">Remove</a>
            </div>
        </div>
        {% endfor %}

        <div class="total">
            <div>Total Items: {{ total_items }}</div>
            <div>Total Price: ₹{{ total_price }}</div>
        </div>

        <a href="{% url 'checkout_page' %}" class="checkout-btn">
            Proceed to Checkout
        </a>

    {% else %}
        <div class="empty-cart">
            <h3>Your cart is empty</h3>
            <a href="{% url 'home' %}" class="btn-add-course">
                Explore Courses
            </a>
        </div>
    {% endif %}
</div>
<!-- FOOTER -->
<footer>
    <div class="footer-grid">
        <div>
            <h3>Company</h3>
            <a href="#">About</a>
            <a href="#">Support</a>
        </div>
        <div>
            <h3>Community</h3>
            <a href="#">Discord</a>
        </div>
        <div>
            <h3>Contact</h3>
            <p>abc@sheryians.com</p>
            <p>Bhopal, India</p>
        </div>
    </div>
    <div class="copy">© 2026 Sheryians Pvt. Ltd.</div>
</footer>
</body>
</html>
