{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout</title>

<style>
/* ================= GLOBAL ================= */
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family: Inter, system-ui, sans-serif;
}

:root{
    --bg:#0c0c0c;
    --card:#111;
    --border:#1f1f1f;
    --text:#e5e7eb;
    --muted:#9ca3af;
    --accent:#24cfa6;
}

body{
    background:var(--bg);
    color:var(--text);
}

/* ================= NAVBAR ================= */
.navbar{
    height:80px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 6rem;
    border-bottom:1px solid var(--border);
}

.logo span{
    color:var(--accent);
    font-size:22px;
    font-weight:600;
}

.nav-links{
    list-style:none;
    display:flex;
    gap:40px;
}

.nav-links a{
    text-decoration:none;
    color:var(--text);
    font-size:15px;
}

.nav-links a:hover{
    color:var(--accent);
}

.auth-buttons{
    display:flex;
    align-items:center;
    gap:14px;
}

.auth-buttons a{
    text-decoration:none;
    padding:10px 22px;
    border-radius:999px;
    font-size:14px;
    font-weight:600;
}

.login{
    color:var(--accent);
    border:1px solid var(--accent);
}

.signup{
    background:var(--accent);
    color:#000;
}

/* ================= CHECKOUT ================= */
.container{
    max-width:900px;
    margin:5rem auto;
}

.container h2{
    font-size:2.4rem;
    font-weight:400;
    text-align:center;
    margin-bottom:3rem;
}

/* ================= ITEM ================= */
.item{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:18px 0;
    border-bottom:1px solid var(--border);
}

.item img{
    width:90px;
    height:65px;
    object-fit:cover;
    border-radius:10px;
}

.course-info{
    flex:2;
    margin-left:16px;
}

.course-info strong{
    font-size:16px;
    font-weight:500;
}

.course-info span{
    display:block;
    font-size:14px;
    color:var(--muted);
    margin-top:4px;
}

.subtotal{
    font-weight:600;
    color:var(--accent);
}

/* ================= TOTAL ================= */
.total{
    display:flex;
    justify-content:space-between;
    margin-top:2rem;
    padding-top:1.5rem;
    border-top:1px solid var(--border);
    font-size:16px;
    font-weight:500;
}

/* ================= BUTTON ================= */
.confirm-btn{
    display:block;
    margin:3rem auto 0;
    padding:14px 40px;
    background:var(--accent);
    color:#000;
    text-decoration:none;
    border-radius:999px;
    font-weight:600;
    text-align:center;
    width:max-content;
}

/* ================= EMPTY ================= */
.empty{
    text-align:center;
    padding:4rem 0;
    color:var(--muted);
}

/* ================= RESPONSIVE ================= */
@media(max-width:768px){
    .navbar{
        padding:0 1.5rem;
    }
    .item{
        flex-direction:column;
        align-items:flex-start;
        gap:12px;
    }
}
</style>
</head>

<body>

<!-- ================= NAV ================= -->
<nav class="navbar">
    <div class="logo">
        <span>Sheryians</span>
    </div>

    <ul class="nav-links">
        <li><a href="{% url 'home' %}">Home</a></li>
        <li><a href="{% url 'course_list' %}">Courses</a></li>
        <li><a href="{% url 'cart_page' %}">Cart</a></li>
    </ul>

    <div class="auth-buttons">
        {% if request.user.is_authenticated %}
            <span style="font-size:14px;">Hi, {{ request.user.username }}</span>
            <a href="{% url 'signout' %}" class="login">Logout</a>
        {% else %}
            <a href="{% url 'signin' %}" class="login">Login</a>
            <a href="{% url 'signup' %}" class="signup">Sign Up</a>
        {% endif %}
    </div>
</nav>

<!-- ================= CHECKOUT ================= -->
<div class="container">
    <h2>Checkout</h2>

    {% if cart_items %}
        {% for item in cart_items %}
        <div class="item">
            <img src="{{ item.course.image.url }}" alt="{{ item.course.title }}">

            <div class="course-info">
                <strong>{{ item.course.title }}</strong>
                <span>â‚¹{{ item.price }} Ã— {{ item.quantity }}</span>
            </div>

            <div class="subtotal">
                â‚¹{{ item.subtotal }}
            </div>
        </div>
        {% endfor %}

        <div class="total">
            <div>Total Items: {{ total_items }}</div>
            <div>Total Price: â‚¹{{ total_price }}</div>
        </div>

        <a href="{% url 'confirm_order' %}" class="confirm-btn">
            Confirm Enrollment
        </a>

    {% else %}
        <div class="empty">
            Your cart is empty ðŸ˜•
        </div>
    {% endif %}
</div>

</body>
</html>
